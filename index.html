<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bar SPEC Menu</title>
<style>
    /* =========================================
       デザイン設定 (ダブルインデックス)
       ========================================= */
    :root {
        --bg-binder: #1a1a1a;
        --bg-page: #252525;
        --tab-inactive: #333;
        --tab-active: #c5a059; /* ゴールド */
        --text-main: #fff;
        --text-sub: #aaa;
        --accent-gold: #d4af37;
    }

    body {
        margin: 0; padding: 0;
        /* 高級感のあるフォント設定 */
        font-family: "Times New Roman", "YuMincho", "Hiragino Mincho ProN", serif;
        background-color: var(--bg-binder);
        color: var(--text-main);
        height: 100vh;
        overflow: hidden;
        display: flex;
    }
    
    /* 日本語フォントはゴシックで見やすく */
    .sub-name, .tab-jp, .sub-tab-btn {
        font-family: "Helvetica Neue", Arial, sans-serif;
    }

    /* --- 左サイドバー（メインカテゴリ） --- */
    .binder-spine {
        width: 40px; background: #111;
        display: flex; flex-direction: column; align-items: center;
        padding-top: 20px; gap: 40px; flex-shrink: 0;
        box-shadow: inset -5px 0 10px rgba(0,0,0,0.5);
    }
    .binder-hole {
        width: 15px; height: 15px; background-color: #000;
        border-radius: 50%; box-shadow: inset 1px 1px 3px rgba(255,255,255,0.1);
    }

    .tabs-container {
        width: 140px; background-color: #1a1a1a;
        display: flex; flex-direction: column;
        padding-top: 10px; flex-shrink: 0; overflow-y: auto; z-index: 10;
    }
    .tab-btn {
        padding: 15px 10px; margin-bottom: 4px;
        background-color: var(--tab-inactive); color: var(--text-sub);
        border: none; text-align: left; cursor: pointer;
        border-radius: 8px 0 0 8px; margin-left: 8px; transition: 0.2s;
    }
    .tab-btn:hover { background-color: #444; transform: translateX(-3px); }
    .tab-btn.active {
        background-color: var(--tab-active); color: #000;
        font-weight: bold; width: 100%; margin-left: 0; padding-left: 18px;
        box-shadow: -2px 2px 5px rgba(0,0,0,0.3);
    }
    .tab-en { display: block; font-size: 0.95em; }
    .tab-jp { display: block; font-size: 0.7em; opacity: 0.8; font-weight: normal; }

    /* --- メインエリア --- */
    .page-area {
        flex: 1; background-color: var(--bg-page);
        display: flex; flex-direction: column;
        box-shadow: -5px 0 15px rgba(0,0,0,0.5);
        position: relative;
    }

    .page-header {
        padding: 20px 40px 10px 40px; /* 下のパディングを減らす */
        background: #2a2a2a; 
        display: flex; justify-content: space-between; align-items: center;
    }
    .page-title { margin: 0; font-size: 1.8rem; color: var(--text-main); letter-spacing: 1px; }

    /* --- 上部タブ（サブカテゴリ用） --- */
    .sub-tabs-container {
        display: flex;
        flex-wrap: nowrap;
        overflow-x: auto; /* タブが多い場合は横スクロール */
        background: #2a2a2a;
        padding: 0 40px;
        border-bottom: 2px solid #444;
        gap: 5px;
        flex-shrink: 0;
        /* スクロールバー非表示 */
        -ms-overflow-style: none; scrollbar-width: none;
    }
    .sub-tabs-container::-webkit-scrollbar { display: none; }

    .sub-tab-btn {
        background: #333; color: #aaa;
        border: none;
        padding: 10px 20px;
        border-radius: 8px 8px 0 0; /* 上だけ丸く */
        cursor: pointer;
        font-size: 0.9rem;
        white-space: nowrap;
        transition: 0.2s;
        position: relative;
        top: 2px; /* 線に乗せる */
    }
    .sub-tab-btn:hover { background: #444; color: #fff; }
    .sub-tab-btn.active {
        background: var(--bg-page); /* ページ背景と同じ色 */
        color: var(--accent-gold);
        font-weight: bold;
        border-top: 2px solid var(--accent-gold);
        z-index: 5;
    }

    /* --- コンテンツエリア --- */
    .content-scroll { flex: 1; overflow-y: auto; padding: 20px 40px; }

    /* 商品リスト */
    .item-row {
        display: flex; justify-content: space-between; align-items: center;
        border-bottom: 1px dashed #444; padding: 15px 0;
        animation: fadeIn 0.3s ease;
    }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

    .item-info h3 { margin: 0; font-size: 1.2rem; color: var(--accent-gold); letter-spacing: 0.5px; }
    .item-info .sub-name { font-size: 0.85rem; color: #bbb; margin-top: 3px;}
    .item-price { font-size: 1.2rem; font-weight: bold; min-width: 80px; text-align: right; font-family: "Helvetica Neue", Arial, sans-serif; }

    /* スマホ対応 */
    @media (max-width: 768px) {
        body { flex-direction: column; }
        .binder-spine { display: none; }
        .tabs-container {
            width: 100%; flex-direction: row; padding: 0;
            background: #111; height: 60px; overflow-x: auto;
        }
        .tab-btn {
            margin: 0; border-radius: 0; min-width: 80px; text-align: center;
            padding: 8px 5px; flex-shrink: 0; border-right: 1px solid #333;
        }
        .page-header { padding: 15px 20px 5px 20px; }
        .sub-tabs-container { padding: 0 20px; }
        .content-scroll { padding: 15px 20px; }
    }
</style>
</head>
<body>

<div class="binder-spine">
    <div class="binder-hole"></div><div class="binder-hole"></div><div class="binder-hole"></div>
    <div class="binder-hole"></div><div class="binder-hole"></div><div class="binder-hole"></div>
</div>

<nav class="tabs-container" id="tabs-container"></nav>

<main class="page-area">
    <div class="page-header">
        <h2 class="page-title" id="page-title">MENU</h2>
    </div>

    <div class="sub-tabs-container" id="sub-tabs-container"></div>
    
    <div class="content-scroll" id="main-content"></div>
</main>

<script src="menu_data.js"></script>

<script>
    // メニューカテゴリ定義
    const categories = [
        { id: "recommend", en: "RECOMMEND", jp: "おすすめ" },
        { id: "whisky", en: "WHISKY", jp: "ウイスキー" },
        { id: "brandy", en: "BRANDY", jp: "ブランデー" },
        { id: "beer", en: "BEER", jp: "ビール" },
        { id: "wine", en: "WINE", jp: "ワイン" },
        { id: "cocktail", en: "COCKTAIL", jp: "カクテル" },
        { id: "non_alcohol", en: "NON-AL", jp: "ノンアル" },
        { id: "food", en: "FOOD", jp: "フード" }
    ];

    let currentTab = "recommend";
    let currentSubFolder = "ALL"; // サブカテゴリの選択状態

    window.onload = function() {
        if (typeof menuData === 'undefined') {
            document.getElementById('main-content').innerHTML = "<p style='padding:20px'>Error: menu_data.js not found.</p>";
            return;
        }
        renderSideTabs();
        updateView();
    };

    // 左サイドタブの描画
    function renderSideTabs() {
        const container = document.getElementById('tabs-container');
        container.innerHTML = '';
        categories.forEach(cat => {
            const btn = document.createElement('button');
            btn.className = 'tab-btn' + (cat.id === currentTab ? ' active' : '');
            btn.innerHTML = `<span class="tab-en">${cat.en}</span><span class="tab-jp">${cat.jp}</span>`;
            btn.onclick = () => {
                currentTab = cat.id;
                currentSubFolder = "ALL"; // カテゴリを変えたらサブ選択をリセット
                renderSideTabs();
                updateView();
            };
            container.appendChild(btn);
        });
    }

    // 画面全体の更新（ヘッダー、上部タブ、コンテンツ）
    function updateView() {
        const titleEl = document.getElementById('page-title');
        const catInfo = categories.find(c => c.id === currentTab);
        titleEl.innerText = catInfo.en;

        // 1. 現在のメインカテゴリのアイテムを取得
        const items = menuData.filter(i => i.category === currentTab);
        
        // 2. サブカテゴリ（フォルダ）の一覧を作る
        const subRegions = [...new Set(items.map(i => i.sub_region).filter(Boolean))];

        // 3. 上部タブを描画 (サブカテゴリがある場合のみ)
        renderTopTabs(subRegions);

        // 4. コンテンツリストを描画
        renderList(items);
    }

    // 上部タブ（サブカテゴリ）の描画
    function renderTopTabs(subRegions) {
        const container = document.getElementById('sub-tabs-container');
        container.innerHTML = '';

        // サブカテゴリが全くない場合はタブバーを隠してもいいが、
        // デザイン統一のため "ALL" だけ表示するか、空にするか。
        // ここでは「サブカテゴリがある場合のみ」表示するスタイルにします。
        if (subRegions.length === 0) {
            container.style.display = 'none';
            currentSubFolder = "ALL";
            return;
        }
        container.style.display = 'flex';

        // "ALL" タブ
        const allBtn = document.createElement('button');
        allBtn.className = 'sub-tab-btn' + (currentSubFolder === 'ALL' ? ' active' : '');
        allBtn.innerText = 'ALL';
        allBtn.onclick = () => { currentSubFolder = 'ALL'; updateView(); };
        container.appendChild(allBtn);

        // 各サブカテゴリタブ
        subRegions.forEach(region => {
            const btn = document.createElement('button');
            btn.className = 'sub-tab-btn' + (currentSubFolder === region ? ' active' : '');
            btn.innerText = region;
            btn.onclick = () => { currentSubFolder = region; updateView(); };
            container.appendChild(btn);
        });
        
        // "その他" (sub_region無し) が混ざっている場合の処理が必要ならここに追加
    }

    // 商品リストの描画
    function renderList(items) {
        const container = document.getElementById('main-content');
        container.innerHTML = '';
        container.scrollTop = 0;

        // フィルタリング
        let displayItems = items;
        if (currentSubFolder !== "ALL") {
            displayItems = items.filter(i => i.sub_region === currentSubFolder);
        }

        if (displayItems.length === 0) {
            container.innerHTML = '<p style="text-align:center; color:#555; margin-top:50px;">NO ITEMS</p>';
            return;
        }

        displayItems.forEach(item => {
            const div = document.createElement('div');
            div.className = 'item-row';
            div.innerHTML = `
                <div class="item-info">
                    <h3>${item.name_en}</h3>
                    <div class="sub-name">${item.name_jp}</div>
                </div>
                <div class="item-price">¥${item.price.toLocaleString()}</div>
            `;
            container.appendChild(div);
        });
    }
</script>
</body>
</html>